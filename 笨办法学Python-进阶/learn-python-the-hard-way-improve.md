# Learn Python the hard way进阶篇notes

[toc]

**重要说明**
本笔记参考Zed A. Shaw 笨办法学Python进阶篇.
Author's repository: https://github.com/zedshaw/learn-more-python-the-hard-way-solutions


一共包含52基本的习题，每个习题都能帮助读者掌握一项关键的实践技能，包括：

1. 使用文本编辑器管理复杂的项目
2. 利用Python功能强大的数据结构
3. 应用算法处理数据结构
4. 掌握必要的文本分析和处理技术
5. 使用SQL有效且合逻辑地建模存储数据
6. 学习强大的命令行工具

帮助读者从单纯地编写能运行的代码跨越到编写能解决实际问题的高质量Python代码，成为一名高阶的Python程序员。

**尽管的本书的书名是让你“学Python”，但它教给你的远远不止进阶Python，而是一套编程的方法论。它让你学会怎样像高手一样工作。**

**Notes maker**: Chenfeng Yuan

**E-mail**: chenfengyuan.hb@gmail.com

## 更新记录

* [x] 2021-07-07  习题0-2
* [x] 2021-07-08  习题3+第三部分-数据结构
* [ ] 2021-07-09  习题13单链表-未完结

## 关于Python的一些笔记

***重要说明***

### 切换虚拟环境 

为了方便使用，主要开发平台依然是windows。如果有必要，就在虚拟机的Ubuntu上运行。

* Windows 虚拟环境morepy的建立及激活

```shell
# 1. 回到主目录
cd ~

# 2. 创建虚拟环境morepy
virtualenv --system-site-packages .venvs/morepy

# 3. 激活虚拟环境
.\.venvs\morepy\Scripts\activate

# 4. 进入当前工作目录
cd D:\chenfeng\Python-cf\笨办法学Python-进阶
```

### 常见报错

在虚拟环境中，安装pytest包报错
`pip install pytest`

>报错信息：ERROR: Could not install packages due to an OSError: [WinError 5] 拒绝访问。: 'C:\\Users\\chenfengyuan\\AppData\\Local\\Temp\\pip-uninstall-duqopu90\\pip.exe' Check the permissions.

***解决方案***

赋予用户权限

`python -m pip install --user pytest`

查看虚拟环境中包的安装情况：`pip list`

## 前言

流程、创新和质量——将这3个词烙印在头脑。本书重点介绍的就是流程、创新和质量这3种实践知识。

离开了**流程**，你将会在长期项目的开始和进行中磕磕绊绊；
离开了**创新**，你将无法在日常工作中找到解决问题的思路；
离开了**质量**，你将无从得知自己的产出是好是坏。

除了流程、创新和质量，还会学到现代程序员必备的几个重要技能，也许将来会发生变化，但它们数十年来一直都很重要，除非发生革命性变化，否则它们依然有价值。就连第六部分的SQL也依然是有价值的，它们会教会你如何将数据结构化，以防止数据日后变得逻辑错乱而无法收拾。学习目标还包括一下这些：

1. 起步：通过快速编程，你将学到如何开始一个项目。
2. 数据结构:书中不会教你每一个数据结构，但会为你开个好头，以便日后更完整的学习它们。
3. 算法：离开了对应的算法，数据结构就毫无用处。
4. 文本解析：计算机科学的基础是解析，学会了解析，你就能更快的上手学习新的流行编程语言。
5. 数据建模：书中会用SQL教你对以基础的逻辑方式存储的数据进行建模。
6. Unix工具：因为本书用了命令行工具作为练习项目，所以你将从中学会进阶的Unix命令行工具。

如果你优化了个人工作流程，你自然会为团队做出重要贡献。除此之外，你还将拥有把自己的想法变成项目的能力，为你个人的项目之路开个好头。

# 第一部分 准备知识

***“流程”是创建东西的步骤，“创新”是你产生想法和实现想法的方式，“质量”则能保证你的实现不是一堆垃圾。***

关键在于应用。

***如果发现自己太糟糕怎么半？***  哈哈哈，太真实了吧！

这是有可能的，但我的方法是帮助你了解自己*为什么*糟糕，以及如何让自己变得更强大。通过做习题，你可以让自己越变越强。

然而，你有可能没你想象的那么差。本书是一份私人教程，用来提高你对个人能力的*客观*认识。这意味着你的重点要放在自己能*提高*的地方，而不是已经做得很好的地方。

如果发现自己在做某个习题的过程中感觉很糟糕，那你需要分解任务，找出你能提高的地方。你还需要联系已经完成的习题去看当前的习题，客观的评价自己的进步。关注自己的进步，这样可以摒弃“正面”和“负面”的心态。客观的思考问题，持续获得进步。

加油💪 
好运🤞

## 习题0-准备工作

* 程序员用的编辑器

新手：Visual Studio VCode & Atom
老手：Vim & Emacs

* Python3.6

本书配套视频基于Python3.6讲解运行代码。

* 工作终端

Windows系统，linux系统均可

* pip和virtualenv的配置

`pip`安装软件包，默认安装到计算机的正式目录下，安装过程需要使用root或者管理员权限。

使用`virtualenv`会为你提供一个Python软件包的“沙盒”。它会创建一个目录，并允许通过pip把软件包安装到这个目录中，避免使用系统安装目录。

视频会介绍安装、配置和运行`pip+virtualenv`的开发环境。

* 实验笔记

在研究项目时，你需要记笔记，并记录测量指标。
解决问题的时候，现在纸上把东西写下来，然后在计算机上整理，这样可以克服视角带来的困难。

* Github账号

项目代码，视频演示代码。

* git

git命令行工具，同步保存代码，方便代码管理。

* 可选：录屏软件

> 潜在问题：
Windows10 virtualenv无法加载文件ctivate.ps1，因为在此系统上禁止运行脚本
所以要解决这个问题，需要在powershell里面修改policy：
使用管理员打开powershell
PS C:\Windows\system32> Set-ExecutionPolicy RemoteSigned

吐槽一句：作者的配套视频，可以说相当不友好了。新手安装，5每秒钟搞定？还有windows自带的ubuntu，作者一笔带过，其实背后的配置还是要花点时间的。😂

## 习题1-论流程

软件开发的世界中有2种流程。

*团队流程*：Scrum、敏捷、极限编程（eXtreme Programming，XP）.

这些流程可以辅助大项目中的团队协作，防止团队人员发生争执。团队流程固定了每个人的协作方式、代码行为标准、汇报流程以及过失管理。团队流程通常包括：

1. 准备待办事项。
2. 完成待办事项。
3. 确认完成无误。

*个人流程*：从画家、音乐家和作家那里学来的。要成为一个有创新能力并兼顾质量的人，你需要开发一个能帮你稳定输出工作的流程。

业余画家、音乐家和作家的一个典型标志，就是他们缺乏自己的流程。从事别的创新工作的人，也都会开发出各种策略来实现自己的想法，并防止自己中途陷入困境。

* 对于*画家*，他的个人流程就是把绘画的问题分解成多个逻辑步骤，这样就能确保他成功完成作品。
* 对于*音乐家*：他们的流程要和编曲的平衡能力结合，让他们保持在自己选择的风格中。
* 对于*作家*：他们的流程是要能让故事自然流畅，而不是充满情节漏洞和逻辑矛盾。

那么对于软件开发，你的个人流程需要能够完成下列任务：

1. 辨别出可行的点子。
2. 开始实施这些点子，看看可行性如何，然后随机应变。
3. **把工作分成众多步骤**，*逐步优化你的点子*；同时，你的方法要能预防问题，并能在发生问题时快速恢复。
4. 确保你的点子的*实现质量*，不要让自己被后面发生的bug击败。
5. 确保你能和别人协作（如果你期望这样的话）。

你只需要让自己擅长自己喜爱的工作，这样做没有任何问题，也根本谈不上是以自我为中心、贪婪、叛逆、滥用资源。

***习题挑战***

**问题清单：**

* 你有没有发现自己不能长时间投入在项目工作上？
* 你是不是容易写出有缺陷的代码，但不知道为什么？
* 你是不是总在追着学习编程语言，但没有实现过什么项目？
* 你是不是总记不住API？（嗯，我也记不住。）
* 你是不是觉得自己比别人差，并害怕被别人发现这一点？
* 你是不是担心自己不是一个“真正的程序员”？
* 你是不是不知道如何把大脑中的点子变成代码？
* 你是不是不知道怎样开始一个项目？
* 你的工作环境是不是很混乱？
* 你是不是在初步实现项目后发现不知道接下来该做什么？
* 你是不是不停地添加代码，直到代码变得一团糟？

思考一下这些问题，然后试着写下你在做项目的过程中具体做了什么。如果你没有项目经验，那就写下你觉得自己在项目中应该做的那些事情。

到目前为止我可能还没有实际的项目开发经验。因此，我将项目替换为科研工作来谈谈自己的想法和我觉得自己在项目中应该做的事情。
***科研***
确实，自己一般很难长时间投入在科研工作中，因为长时间没有突破，内心你充满焦躁，想着赶紧找到解决办法。

如果不是十分的小心，很容易犯一些基本的错误。

因为缺乏锻炼的环境，加上没有做项目契机，确实一直在追着编程语言学习，而没有实战过一些好点的项目。

API太多，确实很难记住，但是一般Google也能找到，如果勤快记笔记，也能马上找到。

因为缺乏实际项目经历，确实感觉到不如别人，比别人要差点儿。

没有经历过“大场面”，程序员的成色确实稍显不足，技不如人。

确实，如何开始一个项目呢？总不能说，git clone别人的代码，然后自己修修补补就是在做项目了吧。😂

工作环境还好，不过确实称不上整洁。因为一些参考书还是蛮多的，堆着有时候确实让人看着没那么舒服，而自己看的进度又很慢。

初步实现代码后的优化和重构，算是高阶内容，小白程序员还插不上手。

哈哈哈，太真实了，不停的堆代码，直到代码一团糟，但是还是能跑。结果时间复杂度和空间复杂上天😂。

## 习题2-论创新

本书中，“创新”只有一个意思：在现实世界中想出一个点子出来。学习绘画、音乐、写作、编程，这些都是为了把想法变成现实。通过经常练习创作，就能变得擅长这件事情。整个过程中没有任何魔法，只是不停的尝试，直到自己能掌握它。

要成为一个*高效*的创作者，你需要在实现想法的过程中遵循一定的流程，给自己一些框架限制，这样既能让自己顺利学到东西，又能避免被流程限制了自己的创新。有想象力的人，需要在引导你的流程和杀死你的点子的流程之间找到平衡。希望通过阅读本书，你能为自己找到这一平衡点。

***习题挑战***

要形成自己的创新流程，首先需要练习随机创新。我认为主要的能力在于可以把看似随机的点子糅成一个有趣或者有用的东西。你可以每天做下面几个练习，练习自己的随机创新能力：

1. 写下至少3个随机组合的单词：森林里、有、水蜥蜴；象征主义、产生、薄饼；蟒蛇、能召唤、外星人。
2. 花10分钟，写一篇关于这3个词的短文，关于一个词也可以。用自己的感知能力去处理他们：视觉、听觉、平衡感、味觉和触觉等。查一下人类有多少种感知能力，想想还有哪些方面可以写。别过滤自己的思维，只要让文字流淌就可以。你还可以把你的点子画出来，也可以写首诗。
3. 在练习的过程中，你可能会突然想出关于软件和其他感兴趣话题的点子。把这些点子写在一个比较严肃的地方，以供日后探索，把它们画下来也可以。

不管你信不信，这个练习会提高你写软件的诸多能力。

1. 它能让你思如泉涌，并且不用过滤它们。
2. 它训练你能随便把看似不相干的点子关联到一起，找出可能的联系的能力。
3. 它让你摒弃自我否定，开放思维，思考更多的可能性。
4. 它提高你书面或者绘图表达思维的能力，通常这是把点子变成现实的第一步。
5. 它强迫你思考自己和别人的感知能力是怎么样工作的，这在实现点子的时候很有用。
6. 它还会诱导人们认为你是一个思维深刻的艺术家。买顶贝雷帽，你就可以搬到巴黎去住了。

随机思考和记录奇思怪想，这对关注软件细节和质量的人来说可能是一件难事。这是完全可以理解的，关注细节和质量依旧是有用的能力。不考虑质量的创新只能产出一堆垃圾，但是没有创新的质量，你就会缺乏评判产品优劣的眼光。你需要的是兼顾创新和质量，这样才能产生点子优秀、质量可靠的软件。

***巩固练习***

从你的感知出发，描写自己当前的感觉。这样除了能锻炼创新，还有利于心理健康。

* [x] 写一篇描写自己当前的感觉。见语雀随笔

## 习题3-论质量

> 因为你记得你的工序，所以你会认为你的作品是正确的。

其实在编完程以后还有很多事情需要做：清理代码、检查质量、添加不变量和断言、写测试、写文档、确认在完整系统的更大范围内它可以工作等。

* 习题挑战

找出自己几个月前写的代码，然后对它进行评审。也许你还不知道该怎样审计代码，其实只要浏览一遍，找出自己不喜欢的内容并用文字标注出来。*关键是要逐个文件逐行地检查*，然后找出自己觉得不合适的代码，写下来为什么觉得不合适。你不需要专门去审核某个软件项目的代码，只要以前自己写的就行了。

* 巩固挑战

通过前面的审核过程，编写一份列表，列出你找到的所有缺陷。你可以去看下官方的缺陷分类，但基本的分类是逻辑、数据类型和调用。

逻辑错误一般是if语句或者循环错误。

数据类型错误是指你使用了错误的变量。

调用错误是你调用函数的方式发生了错误。

# 第二部分 快速实现

你有足够的创意吗？

创新的敌人是起步。如果开始阶段充满阻碍，你怎么能实现自己的梦想呢？万事开头难，对于创新更是如此。

流程的开始，需要你有勇气，一点儿都不介意别人的眼光。

* 如何练习创新

检查表和自动化：

检查表：

1. 打开计算机
2. 关闭社交媒体
3. 摸摸你的幸运吉祥鸭
4. 祈祷一切顺利
5. 冥想十分钟
6. 复制一份项目骨架，开始你的工作。

记住，你需要坐下来立即开始写代码，直接上手。

* 为新手准备的流程

***流程***

1. 准备好计算机，确保一切就绪。
2. 阅读任务描述，记下重点。这是你的研究阶段，你需要书面搜集尽可能多的相关信息。
3. 把你的研究结果转成待办事项清单，写下具体该做哪些事情。想到什么就写什么：该创建哪些文件？用哪些目录？要实现哪些功能？会用到哪些代码库？

*写好了待办事项清单，就可以开始计时。在写代码阶段，还要做下面这些事情*

1. 在你的清单里找出最容易的事情，把它们做完。需要创建文件或目录？那就创建吧。
2. 检查你做的东西是否还有问题。
3. 划掉这一条，继续下一条任务。

*创建清单，完成事项，划掉完成项。*

***新手的写代码流程***

1. 用简单的语句写下你的代码应该实现的功能。你可以写成段落，要是能写成清单就更好了。如果你写成了段落，那你需要把它转化成一份代码功能清单。
2. 把清单写成代码中的注释，每行以#开始。
3. 从文件顶端开始，在每一行注释下面，写下实现功能的Python代码。如果注释太抽象，那就把它分解得更为具体，然后重复这一步。
4. 运行代码，确保你的程序没有语法错误并且能够工作。

## 习题4-处理命令行参数

## 习题5



***解决Windows Powershell下面中文乱码的问题***

`cat learn-python-the-hard-way-improve.md -Encoding UTF8`

# 第三部分 数据结构

***创意表达和批判性思维之间切换。***可以说出自己的想法，并通过松散和富有创意的方式来实现，然后通过批判自己的工作，让它们变得更紧凑，质量更高。

> Warning: 创作过程中的批判会杀死你的想象力。没有批判的创造力只会产生垃圾。这两者你都需要，但不能让它们在同一时间出现。

定义质量：缺陷率低且可理解的代码。

* 通过数据结构学习质量

每个数据结构习题的流程：

1. 每个习题都会描述数据结构的特征，告诉你可以用它做什么事情。在完整结构描述的基础上，实现这些代码，并且不能出错。
2. 有一套必须通过的测试。还需要写一个自动化测试。
3. 继续以45分钟的时限进行训练，花更多时间优化实现。
4. 进入批判模式，找出实际上你是怎样做的。你需要遵循一个审计流程，以批判的眼光审计代码，找出bug，并追踪你制造了多少bug。
5. 最后，修复在审计阶段发现的bug，然后继续工作，直到完成为止。

## 习题13-单链表

single linked list 单链表

***描述：***

在Python这样的面向对象编程语言中处理数据结构，需要弄懂3个常用概念：

1. “节点”，通常是数据结构中的一个容器或者内存位置，你的值就存在那里。
2. “边”，但我们叫它指针或者链接，它指向别的节点。它们会被放在每个节点中，通常存储为实例变量。
3. “控制器”，是一个直到如何正确使用节点中的指针来正确组织数据的类。

在Python里我们会这样映射这些概念：

1. 节点是由类定义出来的对象。
2. 指针（边）只是节点对象中的实例变量。
3. 控制器只是一个类，它会使用节点存储所有东西并组织数据。所有操作都在它里边（push、pop和list等），通常控制器的使用者不需要真正去操作节点和指针。

*吐槽一句*：该书中的配套视频显得非常的糟糕，好吧，学习数据结构与算法，如果用这种摸索着的方法，效率太低了。说实话，比较适合有时间钻研的人，不适合非科班的学生。所以，数据结构与算法部分的学习，不建议继续使用本书进一步提高。拜拜嘞

# 第四部分 中阶项目

## 习题25-xargs

# 第五部分 解析文本

## 习题30-有限状态机



# 第六部分 SQL和对象关系映射

## 习题38-SQL简介



